<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>universe </title>
    <link rel="icon" type="image/png" href="/heart.png" sizes="16x16" />
    <link rel="stylesheet" href="./DEV303.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

    <!-- Importmap cho THREE.js -->
    <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.152.2/build/three.module.js",
        "three/addons/controls/OrbitControls.js": "https://unpkg.com/three@0.152.2/examples/jsm/controls/OrbitControls.js",
        "three/examples/jsm/loaders/FontLoader.js": "https://unpkg.com/three@0.152.2/examples/jsm/loaders/FontLoader.js",
        "three/examples/jsm/geometries/TextGeometry.js": "https://unpkg.com/three@0.152.2/examples/jsm/geometries/TextGeometry.js"
      }
    }
  </script>

    <style>
        .text-white {
            color: white !important;
        }

        .btn-audio-toggle {
            background-color: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
        }

        .music-status {
            display: flex;
            position: fixed;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            z-index: 9999;
            align-items: center;
            font-family: sans-serif;
            font-size: 14px;
        }

        .music-status .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #a259f7;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        @keyframes rotateSlow {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .animate-rotate-slow {
            animation: rotateSlow 4s linear infinite;
        }

        .animate-fade-in {
            animation: fadeIn 1s ease-out forwards;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        body.portrait-mode #landscape-warning {
            display: flex;
            opacity: 1;
        }
    </style>
</head>

<body>
    <div id="container"></div>

    <div id="landscape-warning">
        <div class="warning-content">
            <div class="flex flex-col items-center justify-center text-white space-y-4 animate-fade-in">
                <!-- Phone Icon -->
                <div class="relative w-20 h-32 border-4 border-white rounded-xl flex items-center justify-center">
                    <div class="w-8 h-8 bg-white rounded-md"></div>
                </div>

                <!-- Rotating Arrow -->
                <div class="w-8 h-8 text-white animate-rotate-slow">
                    <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 4v5h.582M4 4a9 9 0 0115.916-2.916M4 4L15 15" />
                    </svg>
                </div>

                <!-- Text -->
                <p class="text-sm text-center px-4">Please rotate your phone to landscape mode</p>
            </div>

        </div>
    </div>

    <div id="dark-overlay"></div>
    <div id="info"></div>

    <script>
        window.dataLove2Loveloom = {
            template: "galaxy",
            data: {
                keychain: { name: "TÊN NÈ", phone: ".......", address: "......." },
                ringTexts: ["CHỖ NÀY ĐẶT TÊN CHO VÀNH ĐAI"],
            }
        };
    </script>

    <script type="module" src="./script.js"></script>

    <!-- Khởi tạo Music Manager -->
    <script>
        const musicManager = {
            audio: null,
            isPlaying: false,

            init() {
                // Đường dẫn nhạc cố định
                this.audio = new Audio('./Ks.mp3');
                this.audio.loop = true;
                this.audio.volume = 0.7;
                this.audio.preload = "auto";

                this.audio.onplay = () => {
                    this.isPlaying = true;
                    this.updateUI();
                };

                this.audio.onpause = () => {
                    this.isPlaying = false;
                    this.updateUI();
                };

                this.updateUI();
            },

            togglePlayback() {
                if (!this.audio) return;
                if (this.audio.paused) {
                    this.audio.play().catch(e => {
                        console.warn('Lỗi phát nhạc:', e);
                    });
                } else {
                    this.audio.pause();
                }
            },

            updateUI() {
                const icon = document.getElementById('audio-icon');
                if (this.isPlaying) {
                    icon.classList.remove('fa-volume-xmark');
                    icon.classList.add('fa-volume-high');
                } else {
                    icon.classList.remove('fa-volume-high');
                    icon.classList.add('fa-volume-xmark');
                }
            }
            //Thêm nhạc 
        }
        let audioStarted = false;
        document.body.addEventListener('click', () => {
            if (audioStarted) return;
            const audio = new Audio('./e.mp3');
            audio.loop = true;
            audio.play().catch(() => {
                console.log("Không thể phát nhạc tự động.");
            });
            audioStarted = true;
        });


    </script>
</body>

</html>
